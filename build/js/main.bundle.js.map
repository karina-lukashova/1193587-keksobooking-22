{"version":3,"sources":["webpack://keksobooking/./source/js/activation.js","webpack://keksobooking/./source/js/utils.js","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/show-message.js","webpack://keksobooking/./source/js/server.js","webpack://keksobooking/./source/js/images.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/main.js"],"names":["formElement","document","querySelector","formBlocks","children","mapFilters","adressElement","createElementWithOneClass","tag","className","element","createElement","classList","add","createElementWithTwoClasses","className1","className2","isEscEvent","evt","key","deleteChildren","parent","firstChild","removeChild","pasteImage","imageElement","container","src","image","cloneNode","appendChild","cardTemplate","content","offerTypesMap","renderCard","author","offer","stayElement","avatar","avatarElement","width","height","title","titleElement","textContent","addressElement","address","price","priceElement","type","typeElement","rooms","guests","capacityElement","checkin","checkout","timeElement","features","length","featuresElement","array","featuresFragment","createDocumentFragment","forEach","feature","featureElement","createFeatures","description","descriptionElement","photos","photosElement","photosFragment","photo","photoElement","createPhotos","ANY_VALUE","FILTER_VALUE","selectFilterElements","querySelectorAll","featuresFilterElements","typeFilterElement","priceFilterElement","roomsFilterElement","guestsFilterElement","wifiFilterElement","dishwasherFilterElement","parkingFilterElement","washerFilterElement","elevatorFilterElement","conditionerFilterElement","isFeatureTheSame","stay","featureName","getAttribute","replace","checked","includes","setFiltersChange","cb","select","addEventListener","CENTER_LATITUDE","CENTER_LONGITUDE","block","setAttribute","filter","readOnly","map","L","on","remove","removeAttribute","setView","lat","lng","tileLayer","attribution","addTo","mainMarkerIcon","icon","iconUrl","iconSize","iconAnchor","MAIN_MARKER_SIZE","markerIcon","MARKER_SIZE","mainMarker","marker","draggable","pasteCards","similarStays","finalSimilarStays","stays","value","isTypeTheSame","isPriceTheSame","toString","isRoomsTheSame","isGuestsTheSame","slice","markers","i","location","push","createMarkers","bindPopup","deleteMarkers","mainElement","successMessageElement","errorMessageElement","onSuccessMessageClick","removeEventListener","onSuccessMessageKeydown","preventDefault","onErrorMessageClick","onErrorMessageKeydown","showErrorMessage","getStaysData","onSuccess","onError","_","debounce","err","errorReasonElement","name","body","setTimeout","showDataError","fetch","then","response","json","catch","IMAGE_TYPES","avatarChooserElement","avatarContainerElement","avatarPreviewElement","stayPhotoChooserElement","stayPhotosContainerElement","stayPhotoPreviewElement","readImageWithSubscribe","file","fileName","preview","some","item","endsWith","reader","FileReader","result","readAsDataURL","chooser","avatarFile","files","avatarFileName","toLowerCase","onAvatarChooserChange","onImageChooserChange","stayForm","stayTypeElement","stayPriceElement","stayTimeInElement","stayTimeOutElement","roomNumberElement","filterFormElement","minPriceForTypeMap","onCapacityInput","setCustomValidity","reportValidity","synchronizeTime","firstTime","secondTime","currentTarget","titleLength","priceValue","min","placeholder","getAdressValue","_latlng","toFixed","onStayFormReset","reset","setLatLng","sendSuccessForm","formData","FormData","target","method","ok","Error","onFormSubmit"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const formElement = document.querySelector('.ad-form');\nconst formBlocks = [...document.querySelector('.ad-form').children];\nconst mapFilters = [...document.querySelector('.map__filters').children];\nconst adressElement = document.querySelector('#address');\n\nconst setDefault = () => {\n  formElement.classList.add('ad-form--disabled');\n  formBlocks.forEach(block => block.setAttribute('disabled', true));\n  mapFilters.forEach(filter => filter.setAttribute('disabled', true));\n  adressElement.readOnly = true;\n};\n\nconst activateSite = () => {\n  formElement.classList.remove('ad-form--disabled');\n  formBlocks.forEach(block => block.removeAttribute('disabled'));\n  mapFilters.forEach(filter => filter.removeAttribute('disabled'));\n};\n\nexport {setDefault, activateSite};\n","// Переменные-константы\nconst MIN_X_COORDINATE = 35.65000;\nconst MAX_X_COORDINATE = 35.70000;\nconst MIN_Y_COORDINATE = 139.70000;\nconst MAX_Y_COORDINATE = 139.80000;\nconst COORDINATE_DECIMALS = 5;\n\n// Фунция для поиска случайного числа в заданном интервале включительно. Источник: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Math/random#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D0%BE%D0%B3%D0%BE_%D1%87%D0%B8%D1%81%D0%BB%D0%B0_%D0%B2_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D0%BE%D0%BC_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB%D0%B5\nconst getRandomNumber = (min, max) => {\n  if (min > max) {\n    return 0;\n  }\n  let result = Math.random() * (max - min + 1) + min;\n  return result > max ? max : result;\n}\n\n// Функция, возвращающая случайное целое число из переданного диапазона включительно. Источник: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Math/random#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D0%BE%D0%B3%D0%BE_%D1%86%D0%B5%D0%BB%D0%BE%D0%B3%D0%BE_%D1%87%D0%B8%D1%81%D0%BB%D0%B0_%D0%B2_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D0%BE%D0%BC_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB%D0%B5_%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE\nconst getRandomInteger = (min, max) => {\n  return Math.floor(getRandomNumber(min, max));\n}\n\n// Функция, возвращающая случайное число с плавающей точкой из переданного диапазона включительно. Источник: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\nconst getCoordinates = (min, max, digits) => {\n  if (min > max) {\n    return '0';\n  }\n  return getRandomNumber(min, max).toFixed(digits);\n}\n\n// Получаем случайный элемент массива:\nconst getRandomArrayElement = (elements) => {\n  return elements[getRandomInteger(0, elements.length - 1)];\n};\n\n// Получаем уникальный массив из count элементов:\nconst getUniqueArray = (allArr, count) => {\n  const newArr = [];\n  for (let i = 1; i <= count; i++) {\n    newArr.push(getRandomArrayElement(allArr));\n  }\n  const uniqueSet = new Set(newArr);\n  return Array.from(uniqueSet);\n}\n\n// Получаем случайные координаты из заданного интервала\nconst getLocation = () => {\n  return {\n    x: getCoordinates(MIN_X_COORDINATE, MAX_X_COORDINATE, COORDINATE_DECIMALS),\n    y: getCoordinates(MIN_Y_COORDINATE, MAX_Y_COORDINATE, COORDINATE_DECIMALS),\n  };\n}\n\n// Создаем элемент разметки с одним классом\nconst createElementWithOneClass = (tag, className) => {\n  const element = document.createElement(tag);\n  element.classList.add(className);\n  return element;\n}\n\n// Создаем элемент разметки с двумя классами\nconst createElementWithTwoClasses = (tag, className1, className2) => {\n  const element = document.createElement(tag);\n  element.classList.add(className1);\n  element.classList.add(className2);\n  return element;\n}\n\n// Проверяем кнопку Esc\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\n// Функция удаления всех детей\nconst deleteChildren = (parent) => {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n// Вставляем создаем изображение и вставляем в контейнер\nconst pasteImage = (imageElement, container, src) => {\n  const image = imageElement.cloneNode(true);\n  image.src = src;\n  container.appendChild(image);\n}\n\nexport {getRandomInteger, getRandomArrayElement, getUniqueArray, getLocation, createElementWithOneClass, createElementWithTwoClasses, isEscEvent, deleteChildren, pasteImage};\n","import {createElementWithOneClass, createElementWithTwoClasses} from './utils.js';\n\nconst PHOTO_WIDTH = 45;\nconst PHOTO_HEIGHT = 40;\nconst AVATAR_WIDTH = 70;\nconst AVATAR_HEIGHT = 70;\n\nconst cardTemplate = document.querySelector('#card').content.querySelector('.popup');\n\nconst offerTypesMap = {\n  'palace': 'Дворец',\n  'flat': 'Квартира',\n  'bungalow': 'Бунгало',\n  'house': 'Дом',\n}\n\nconst createFeatures = (array) => {\n  const featuresFragment = document.createDocumentFragment();\n  array.forEach(feature => {\n    const featureElement = createElementWithTwoClasses('li', 'popup__feature', 'popup__feature--' + feature);\n    featuresFragment.appendChild(featureElement);\n  })\n  return featuresFragment;\n}\n\nconst createPhotos = (array) => {\n  const photosFragment = document.createDocumentFragment();\n  array.forEach(photo => {\n    const photoElement = createElementWithTwoClasses('img', 'popup__photo');\n    photoElement.src = photo;\n    photoElement.width = PHOTO_WIDTH;\n    photoElement.height = PHOTO_HEIGHT;\n    photosFragment.appendChild(photoElement);\n  })\n  return photosFragment;\n}\n\nconst renderCard = ({author, offer}) => {\n  const stayElement = cardTemplate.cloneNode(false);\n\n  // Вставка аватара пользователя, если это есть в данных\n  if (author.avatar) {\n    const avatarElement = createElementWithOneClass('img', 'popup__avatar');\n    avatarElement.width = AVATAR_WIDTH;\n    avatarElement.height = AVATAR_HEIGHT;\n    avatarElement.src = author.avatar;\n    stayElement.appendChild(avatarElement);\n  }\n\n  // Вставка названия объявления, если это есть в данных\n  if (offer.title) {\n    const titleElement = createElementWithOneClass('h3', 'popup__title');\n    titleElement.textContent = offer.title;\n    stayElement.appendChild(titleElement);\n  }\n\n  // Вставка адреса объявления, если это есть в данных\n  if (offer.title) {\n    const addressElement = createElementWithTwoClasses('p', 'popup__text', 'popup__text--address');\n    addressElement.textContent = offer.address;\n    stayElement.appendChild(addressElement);\n  }\n\n  // Вставка стоимости объявления, если это есть в данных\n  if (offer.price || offer.price === 0) {\n    const priceElement = createElementWithTwoClasses('p', 'popup__text', 'popup__text--price');\n    priceElement.textContent = `${offer.price} ₽/ночь`;\n    stayElement.appendChild(priceElement);\n  }\n\n  // Вставка типа жилья, если это есть в данных\n  if (offer.type) {\n    const typeElement = createElementWithOneClass('h4', 'popup__type');\n    typeElement.textContent = offerTypesMap[offer.type];\n    stayElement.appendChild(typeElement);\n  }\n\n  // Вставка количества комнат и гостей, если это есть в данных\n  if (offer.rooms && offer.guests) {\n    const capacityElement = createElementWithTwoClasses('p', 'popup__text', 'popup__text--capacity');\n    capacityElement.textContent = `${offer.rooms} комнаты для ${offer.guests} гостей`;\n    stayElement.appendChild(capacityElement);\n  }\n\n  // Вставка времени заезда и выезда, если это есть в данных\n  if (offer.checkin && offer.checkout) {\n    const timeElement = createElementWithTwoClasses('p', 'popup__text', 'popup__text--time');\n    timeElement.textContent = `Заезд после ${offer.checkin}, выезд до ${offer.checkout}`;\n    stayElement.appendChild(timeElement);\n  }\n\n  // Вставка дополнительных удобств жилья, если это есть в данных\n  if (offer.features.length !== 0) {\n    const featuresElement = createElementWithOneClass('ul', 'popup__features');\n    featuresElement.appendChild(createFeatures(offer.features));\n    stayElement.appendChild(featuresElement);\n  }\n\n  // Вставка описания объявления, если это есть в данных\n  if (offer.description) {\n    const descriptionElement = createElementWithOneClass('p', 'popup__description');\n    descriptionElement.textContent = offer.description;\n    stayElement.appendChild(descriptionElement);\n  }\n\n  // Вставка фотографий жилья, если это есть в данных\n  if (offer.photos.length !== 0) {\n    const photosElement = createElementWithOneClass('div', 'popup__photos');\n    photosElement.appendChild(createPhotos(offer.photos));\n    stayElement.appendChild(photosElement);\n  }\n\n  return stayElement;\n}\n\nexport {renderCard};\n","const ANY_VALUE = 'any';\nconst LOW_VALUE = 'low';\nconst MIDDLE_VALUE = 'middle';\nconst HIGH_VALUE = 'high';\nconst FILTER_VALUE = /filter-/;\n\nconst PriceRange = {\n  MIN_MIDDLE: 10000,\n  MIN_HIGH: 50000,\n}\n\nconst mapFilters = [...document.querySelector('.map__filters').children];\nconst selectFilterElements = [...document.querySelectorAll('.map__filter')];\nconst featuresFilterElements = [...document.querySelectorAll('.map__checkbox')];\nconst typeFilterElement = document.querySelector('#housing-type');\nconst priceFilterElement = document.querySelector('#housing-price');\nconst roomsFilterElement = document.querySelector('#housing-rooms');\nconst guestsFilterElement = document.querySelector('#housing-guests');\nconst wifiFilterElement = document.querySelector('#filter-wifi');\nconst dishwasherFilterElement = document.querySelector('#filter-dishwasher');\nconst parkingFilterElement = document.querySelector('#filter-parking');\nconst washerFilterElement = document.querySelector('#filter-washer');\nconst elevatorFilterElement = document.querySelector('#filter-elevator');\nconst conditionerFilterElement = document.querySelector('#filter-conditioner');\n\n// Функция блокировки фильтров - вызывается, если данные с сервера не получены\nconst blockFilters = () => {\n  mapFilters.forEach(filter => filter.setAttribute('disabled', true));\n};\n\n// Фильтр по типу жилья - предикат\nconst isTypeTheSame = (stay) => {\n  return typeFilterElement.value === ANY_VALUE ? true : stay.offer.type === typeFilterElement.value;\n}\n\n// Фильтр по цене - предикат\nconst isPriceTheSame = (stay) => {\n  return priceFilterElement.value === ANY_VALUE ? true : (\n    ((priceFilterElement.value === LOW_VALUE) && (stay.offer.price < PriceRange.MIN_MIDDLE)) ||\n    ((priceFilterElement.value === HIGH_VALUE) && (stay.offer.price >= PriceRange.MIN_HIGH)) ||\n    ((priceFilterElement.value === MIDDLE_VALUE) && (stay.offer.price >= PriceRange.MIN_MIDDLE) && (stay.offer.price < PriceRange.MIN_HIGH))\n  );\n}\n\n// Фильтр по числу комнат - предикат\nconst isRoomsTheSame = (stay) => {\n  return roomsFilterElement.value === ANY_VALUE ? true : stay.offer.rooms.toString() === roomsFilterElement.value;\n}\n\n// Фильтр по числу гостей - предикат\nconst isGuestsTheSame = (stay) => {\n  return guestsFilterElement.value === ANY_VALUE ? true : stay.offer.guests.toString() === guestsFilterElement.value;\n}\n\n// Фильтр по дополнительным удобствам\nconst isFeatureTheSame = (featureElement, stay) => {\n  const featureName = featureElement.getAttribute('id').replace(FILTER_VALUE, '');\n  return featureElement.checked === false ? true  : stay.offer.features.includes(featureName);\n}\n\n// Функция со всеми фильтрами\nconst filterStays = (stays) => {\n  return stays.filter(stay => {\n    return isTypeTheSame(stay)&&\n    isPriceTheSame(stay)&&\n    isRoomsTheSame(stay)&&\n    isGuestsTheSame(stay)&&\n    isFeatureTheSame(wifiFilterElement, stay)&&\n    isFeatureTheSame(dishwasherFilterElement, stay)&&\n    isFeatureTheSame(parkingFilterElement, stay)&&\n    isFeatureTheSame(washerFilterElement, stay)&&\n    isFeatureTheSame(elevatorFilterElement, stay)&&\n    isFeatureTheSame(conditionerFilterElement, stay);\n  });\n}\n\nconst setFiltersChange = (cb) => {\n  selectFilterElements.forEach(select => {\n    select.addEventListener('input', cb);\n  })\n  featuresFilterElements.forEach(feature => {\n    feature.addEventListener('input', cb);\n  })\n}\n\n\nexport {blockFilters, filterStays, setFiltersChange};\n","import {setDefault, activateSite} from './activation.js';\nimport {renderCard} from './card.js';\nimport {filterStays, setFiltersChange} from './filter.js';\n\nconst MAIN_MARKER_SIZE = 52;\nconst MARKER_SIZE = 46;\n// Координаты взяла с сайта: https://dateandtime.info/ru/citycoordinates.php?id=1850147\nconst CENTER_LATITUDE = 35.68950;\nconst CENTER_LONGITUDE = 139.69171;\n\nconst SIMILAR_STAYS_COUNT = 10;\n\n// Функция установления изначальных настроек сайта (поля заблокированы, адрес = readonly)\nsetDefault();\n\n// Настройка карты:\n/* global L:readonly */\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    activateSite();\n  })\n  .setView({\n    lat: CENTER_LATITUDE,\n    lng: CENTER_LONGITUDE,\n  }, 10);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\n// Маркеры:\nconst mainMarkerIcon = L.icon({\n  iconUrl: './img/main-pin.svg',\n  iconSize: [MAIN_MARKER_SIZE, MAIN_MARKER_SIZE],\n  iconAnchor: [MAIN_MARKER_SIZE / 2, MAIN_MARKER_SIZE],\n});\n\nconst markerIcon = L.icon({\n  iconUrl: './img/pin.svg',\n  iconSize: [MARKER_SIZE, MARKER_SIZE],\n  iconAnchor: [MARKER_SIZE / 2, MARKER_SIZE],\n});\n\nconst mainMarker = L.marker(\n  {\n    lat: CENTER_LATITUDE,\n    lng: CENTER_LONGITUDE,\n  },\n  {\n    draggable: true,\n    icon: mainMarkerIcon,\n  },\n);\n\nmainMarker.addTo(map);\n\n// Создать маркеры\nconst createMarkers = (stays) => {\n  const markers = [];\n  for (let i = 0; i < stays.length;i++) {\n    const marker = L.marker(\n      {\n        lat: stays[i].location.lat,\n        lng: stays[i].location.lng,\n      },\n      {\n        icon: markerIcon,\n      },\n    );\n    markers.push(marker);\n  }\n  return(markers);\n}\n\n// Удалить маркеры\nconst deleteMarkers = (markers) => {\n  for (let i = 0; i < markers.length;i++) {\n    markers[i]\n      .remove();\n  }\n}\n\nconst pasteCards = (similarStays) => {\n  const finalSimilarStays = filterStays(similarStays).slice(0, SIMILAR_STAYS_COUNT);\n  const markers = createMarkers(finalSimilarStays);\n  for (let i = 0; i < markers.length;i++) {\n    markers[i]\n      .addTo(map)\n      .bindPopup(renderCard(finalSimilarStays[i]));\n  }\n  setFiltersChange(() => deleteMarkers(markers));\n}\n\n// Установка основного маркера по умолчанию после отправки/сброса формы\nconst setDefaultMainMarker = () => {\n  mainMarker.setLatLng([CENTER_LATITUDE, CENTER_LONGITUDE]);\n}\n\nexport {mainMarker, pasteCards, setDefaultMainMarker};\n","import {isEscEvent} from './utils.js';\n\nconst DATA_ERROR_TIME = 3000;\nconst mainElement = document.querySelector('main')\nconst successMessageTemplate = document.querySelector('#success').content;\nconst successMessageElement = successMessageTemplate.querySelector('.success');\nconst errorMessageTemplate = document.querySelector('#error').content;\nconst errorMessageElement = errorMessageTemplate.querySelector('.error');\n\n// Функция показа ошибки, если не удалось получить данные с сервера:\nconst showDataError = (err) => {\n  const errorTemplate = document.querySelector('#data-error').content;\n  const errorMessageElement = errorTemplate.querySelector('.data-error').cloneNode(true);\n  const errorReasonElement = document.createElement('p');\n  errorReasonElement.classList.add('data-error__message')\n  errorReasonElement.textContent = err.name;\n  errorMessageElement.appendChild(errorReasonElement);\n  document.body.appendChild(errorMessageElement);\n\n  setTimeout(() => {\n    errorMessageElement.remove();\n  }, DATA_ERROR_TIME);\n}\n\n// Функция закрытия сообщения об успешной отправке\nconst onSuccessMessageClick = () => {\n  successMessageElement.remove();\n  document.removeEventListener('keydown', onSuccessMessageKeydown);\n  document.removeEventListener('click', onSuccessMessageClick);\n}\n\n// Функции закрытия успешного сообщения при нажатии Esc\nconst onSuccessMessageKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    onSuccessMessageClick();\n  }\n}\n\n// Функция закрытия сообщения о неудачной отправке\nconst onErrorMessageClick = () => {\n  errorMessageElement.remove();\n  document.removeEventListener('keydown', onErrorMessageKeydown);\n  document.removeEventListener('click', onErrorMessageClick);\n}\n\n// Функции закрытия неудачного сообщения при нажатии Esc\nconst onErrorMessageKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    onErrorMessageClick();\n  }\n}\n\n// Показ сообщения после успешной отправки формы\nconst showSuccessMessage = () => {\n  mainElement.appendChild(successMessageElement);\n  document.addEventListener('keydown', onSuccessMessageKeydown);\n  document.addEventListener('click', onSuccessMessageClick);\n}\n\n// Показ сообщения после неудачной отправки формы. Т.к. сообщение закрывается при клике на любой области экрана, то оно автоматически закрывается и при клике на кнопку .error__button - поэтому отдельно для него событие не делала.\nconst showErrorMessage = () => {\n  mainElement.appendChild(errorMessageElement);\n  document.addEventListener('keydown', onErrorMessageKeydown);\n  document.addEventListener('click', onErrorMessageClick);\n}\n\nexport {showDataError, showSuccessMessage, showErrorMessage};\n","/* global _:readonly */\nimport {pasteCards} from './map.js';\nimport {blockFilters, setFiltersChange} from './filter.js';\nimport {showDataError} from './show-message.js'\n\nconst REPASTE_DELAY = 500;\n\nconst getData = (onSuccess, onError) => {\n  fetch('https://22.javascript.pages.academy/keksobooking/data')\n    .then((response) => response.json())\n    .then((stays) => onSuccess(stays))\n    .catch((err) => onError(err));\n};\n\n// Заключила в функцию, чтобы переиспользовать при активации страницы и при очистке/успешной отправке формы (сброс отфильтрованных меток)\nconst getStaysData = () => {\n  getData((stays) => {\n    pasteCards(stays);\n    setFiltersChange(_.debounce(\n      () => pasteCards(stays),\n      REPASTE_DELAY,\n    ));\n  }, (err) => {\n    showDataError(err);\n    blockFilters();\n  });\n}\n\nconst sendData = (formData, onSuccess, onError) => {\n  fetch(\n    'https://22.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      body: formData,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        throw new Error;\n      }\n    })\n    .catch(() => {\n      onError();\n    });\n};\n\nexport {getStaysData, sendData};\n","import {deleteChildren, pasteImage} from './utils.js';\n\nconst IMAGE_TYPES = ['jpg', 'jpeg', 'png'];\n\nconst avatarChooserElement = document.querySelector('.ad-form-header__input');\nconst avatarContainerElement = document.querySelector('.ad-form-header__preview');\nconst avatarPreviewElement = document.querySelector('.ad-form-header__preview img');\nconst stayPhotoChooserElement = document.querySelector('.ad-form__input');\nconst stayPhotosContainerElement = document.querySelector('.ad-form__photo');\nconst stayPhotoPreviewElement = document.querySelector('.ad-form__photo img');\n\nconst readImageWithSubscribe = (file, fileName, preview, container) => {\n  const matches = IMAGE_TYPES.some((item) => {\n    return fileName.endsWith(item);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      pasteImage(preview, container, reader.result);\n    });\n\n    reader.readAsDataURL(file);\n  }\n}\n\nconst onAvatarChooserChange = (chooser, preview, container) => {\n  deleteChildren(container);\n\n  const avatarFile = chooser.files[0];\n  const avatarFileName = avatarFile.name.toLowerCase();\n\n  readImageWithSubscribe(avatarFile, avatarFileName, preview, container);\n}\n\nconst onImageChooserChange = (chooser, preview, container) => {\n  deleteChildren(container);\n\n  for (let i = 0; i < chooser.files.length; i++) {\n    const avatarFileName = chooser.files[i].name.toLowerCase();\n\n    readImageWithSubscribe(chooser.files[i], avatarFileName, preview, container);\n  }\n}\n\navatarChooserElement.addEventListener('change', () => {\n  onAvatarChooserChange(avatarChooserElement, avatarPreviewElement, avatarContainerElement);\n});\n\nstayPhotoChooserElement.addEventListener('change', () => {\n  onImageChooserChange(stayPhotoChooserElement, stayPhotoPreviewElement, stayPhotosContainerElement);\n});\n\nexport {avatarContainerElement, avatarPreviewElement, stayPhotosContainerElement, stayPhotoPreviewElement};\n","import {mainMarker, setDefaultMainMarker} from './map.js';\nimport {showSuccessMessage, showErrorMessage} from './show-message.js'\nimport {getStaysData, sendData} from './server.js';\nimport {avatarContainerElement, avatarPreviewElement, stayPhotosContainerElement, stayPhotoPreviewElement} from './images.js';\nimport {deleteChildren, pasteImage} from './utils.js';\n\nconst MIN_TITLE_LENGTH = 30;\nconst MAX_TITLE_LENGTH = 100;\nconst MIN_PRICE = 0;\nconst MAX_CAPACITY = '100';\nconst MAX_PRICE = 1000000;\nconst DIGITS_NUMBER = 5;\n\nconst stayForm = document.querySelector('.ad-form');\nconst stayTypeElement = document.querySelector('#type');\nconst stayPriceElement = document.querySelector('#price');\nconst stayTimeInElement = document.querySelector('#timein');\nconst stayTimeOutElement = document.querySelector('#timeout');\nconst titleElement = document.querySelector('#title');\nconst priceElement = document.querySelector('#price');\nconst roomNumberElement = document.querySelector('#room_number');\nconst capacityElement = document.querySelector('#capacity');\nconst filterFormElement = document.querySelector('.map__filters');\n\nconst minPriceForTypeMap = {\n  'bungalow': 0,\n  'flat': 1000,\n  'house': 5000,\n  'palace': 10000,\n}\n\n// Функция валидации текста на нужное количество символов:\nconst onTextInput = ({currentTarget}) => {\n  const titleLength = currentTarget.value.length;\n  if (titleLength < MIN_TITLE_LENGTH) {\n    currentTarget.setCustomValidity('Введите ещё ' + (MIN_TITLE_LENGTH - titleLength) +' симв.');\n  } else if (titleLength > MAX_TITLE_LENGTH) {\n    currentTarget.setCustomValidity('Удалите лишние ' + (titleLength - MAX_TITLE_LENGTH) +' симв.');\n  } else {\n    currentTarget.setCustomValidity('');\n  }\n\n  currentTarget.reportValidity();\n}\n\n// Функция валидации цены на минимум и максимум:\nconst onPriceInput = ({currentTarget}) => {\n  const priceValue = currentTarget.value;\n  if (priceValue < MIN_PRICE) {\n    currentTarget.setCustomValidity('Цена должна быть минимум 0 рублей');\n  } else if (priceValue > MAX_PRICE) {\n    currentTarget.setCustomValidity('Цена должна быть максимум 1 000 000 рублей');\n  } else {\n    currentTarget.setCustomValidity('');\n  }\n\n  currentTarget.reportValidity();\n}\n\n// Функция валидации количества комнат и гостей:\nconst onCapacityInput = (value) => {\n  if (value === MAX_CAPACITY && capacityElement.value !== '0') {\n    capacityElement.setCustomValidity('100 комнат может быть только \"не для гостей\"');\n  } else if (value !== MAX_CAPACITY && capacityElement.value === '0') {\n    capacityElement.setCustomValidity('Выберите количество гостей, оно не может равняться 0');\n  } else if (value < capacityElement.value) {\n    capacityElement.setCustomValidity(`Количество гостей должно быть не больше ${value}`);\n  } else {\n    capacityElement.setCustomValidity('');\n  }\n\n  capacityElement.reportValidity();\n}\n\n// Функция установки минимальной цены:\nconst onStayTypeInput = () => {\n  stayPriceElement.min = minPriceForTypeMap[stayTypeElement.value];\n  stayPriceElement.placeholder = minPriceForTypeMap[stayTypeElement.value];\n}\n\n// Функция синхронизации времени:\nconst synchronizeTime = (firstTime, secondTime) => {\n  firstTime.addEventListener('input', () => secondTime.value = firstTime.value);\n}\n\n// Валидация названия объявления:\ntitleElement.addEventListener('input', onTextInput);\n\n// Валидация цены:\npriceElement.addEventListener('input', onPriceInput);\n\n// Валидация соответствия количества гостей от количества комнат - при изменении количества комнат:\nroomNumberElement.addEventListener('input', () => onCapacityInput(roomNumberElement.value));\n\n// Валидация соответствия количества гостей от количества комнат - при изменении количества гостей:\ncapacityElement.addEventListener('input', () => onCapacityInput(roomNumberElement.value));\n\n// Синхронизация цены и типа жилья\nstayTypeElement.addEventListener('input', onStayTypeInput);\n\n// Синхронизация времени:\nsynchronizeTime(stayTimeInElement, stayTimeOutElement);\nsynchronizeTime(stayTimeOutElement, stayTimeInElement);\n\n// Поле адреса в зависимости от положения основной метки:\nconst adressElement = document.querySelector('#address');\n\nconst getAdressValue = (marker) => `${marker._latlng.lat.toFixed(DIGITS_NUMBER)}, ${marker._latlng.lng.toFixed(DIGITS_NUMBER)}`;\n\nadressElement.value = getAdressValue(mainMarker);\nmainMarker.on('moveend', () => {\n  adressElement.value = getAdressValue(mainMarker);\n});\n\nexport {adressElement};\n\n// Сброс формы, фильтров и маркера до default\nconst onStayFormReset = () => {\n  stayForm.reset();\n  stayPriceElement.min = 0;\n  stayPriceElement.placeholder = 0;\n  deleteChildren(avatarContainerElement);\n  pasteImage(avatarPreviewElement, avatarContainerElement, 'img/muffin-grey.svg');\n  deleteChildren(stayPhotosContainerElement);\n  pasteImage(stayPhotoPreviewElement, stayPhotosContainerElement, 'img/muffin-grey.svg');\n  filterFormElement.reset();\n  setDefaultMainMarker();\n  getStaysData();\n}\n\n// Ресет формы\nstayForm.addEventListener('reset', onStayFormReset)\n\n// Функция после успешной отправки данных формы\nconst sendSuccessForm = () => {\n  showSuccessMessage();\n  onStayFormReset();\n}\n\n// Функция для отправки формы\nconst onFormSubmit = (evt) => {\n  evt.preventDefault();\n  const formData = new FormData(evt.target);\n  sendData(formData, sendSuccessForm, showErrorMessage);\n}\n\n// Отправка формы\nstayForm.addEventListener('submit', (evt) => onFormSubmit(evt))\n","import './form.js';\nimport {getStaysData} from './server.js';\nimport './images.js';\n\ngetStaysData();\n"],"sourceRoot":""}